<!--index.html-->
<!--Created by Ethan Koh-->
<!doctype html>
<html>
  <head>
    <link type="text/css" rel="stylesheet" href="main.css" />

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>   
    
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

    <!-- Bootstrap Toggle: http://www.bootstraptoggle.com/ -->
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.0/css/bootstrap-toggle.min.css" rel="stylesheet">
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.0/js/bootstrap-toggle.min.js"></script>


    <title> ORCS </title>

  </head> 

<script>

    var mode = "aki";
    var akifactors = ["element1", "element2", "element3", "element4", "element8", "element9", "element10", "element11", "akirisk"];
    var affactors = ["element1", "element5", "element6", "element7", "element10", "element12", "afrisk"];

    window.onload = function() {
      hide(affactors);
      show(akifactors);
      var factors = document.getElementsByName('factor');
      for (var i = 0; i < factors.length; i++) {
        $(function() {
          $(factors[i]).change(function() {
            countScore();
          });
        });       
      }

      $('#nav_aki').on('click', function () {
        hide(affactors);
        show(akifactors);
        renumber('number');
        mode = "aki";
        countScore();
      });

      $('#nav_af').on('click', function () {
        hide(akifactors);
        show(affactors);
        renumber('number');
        mode = "af";
        countScore();
      });

      renumber('number');
    }
    function c(id) {
      if($(id).prop('checked')) {
        return 1;
      } else {
        return 0;
      }
    }

    function countScore() {
      var score = 0;
      if(mode == "aki") {
        score = c("#factor1")*2+c("#factor2")*2+c("#factor3")*2+c("#factor4")*1+c("#factor8")*1+c("#factor9")*3+c("#factor10")*2+c("#factor11")*1;
      } else if(mode == "af") {
        score = c("#factor1")*1+c("#factor5")*3+c("#factor6")*2+c("#factor7")*2+c("#factor10")*2+c("#factor12")*1;
      }
      
      updateScore(score);
    }

    function updateScore(score) {
      document.getElementById("scoretext").innerHTML = "Your score is ".concat(score.toString());
    }

    function show(element_arr) {
      for (var i = 0; i < element_arr.length; i++) {
        document.getElementById(element_arr[i]).style.display = "block";
      }
    }

    function hide(element_arr) {
      for (var i = 0; i < element_arr.length; i++) {
        document.getElementById(element_arr[i]).style.display = "none";
      }
    }

    function renumber(name) {
      console.log('renumbering');
      var titles = document.getElementsByName(name);
      var index = 1;
      for (var i = 0; i < titles.length; i++) {
        if(titles[i].parentElement.parentElement.style.display == "block") {
          titles[i].innerHTML = index.toString().concat('. ');
          index++;
        }
      }
    }


  </script>
  <style>
    .row{
        overflow: hidden; 
    }

    [class*="col-"]{
        margin-bottom: -99999px;
        padding-bottom: 99999px;
    }
  </style>

</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-md-6 col-md-offset-3">
        <h1 class="text-center">Post-CABG Risk Scoring</h1>
      </div>
    </div>

    <div class="row">
      <div class="text-center">
        <ul class="pagination">
          <li><a href="#" id="nav_aki">AKI</a></li>
          <li><a href="#" id="nav_af">AF</a></li>
        </ul>
      </div>
    </div>
    
    <div class="row">
      <div class="col-md-6 col-md-offset-3">
        <h2 class="text-center">Pre-operative Factors</h1>
      </div>
    </div>

    <div class="row">
      <div class="col-md-offset-3">
        <div id="element1" name="element" class="col-md-8 text-center">
          <p><h3 name="title"><span name="number">1. </span>Age 65 and above</h3>
          <input type="checkbox" data-toggle="toggle" data-size="large" data-on="Yes" data-off="No" data-onstyle="success" data-offstyle="danger" name="factor" id="factor1"></p>
        </div>
        <div id="element2" name="element" class="col-md-8 text-center">
          <p><h3 name="title"><span name="number">1. </span>History of Hypertension</h3>
          <input type="checkbox" data-toggle="toggle" data-size="large" data-on="Yes" data-off="No" data-onstyle="success" data-offstyle="danger" name="factor" id="factor2"></p>
        </div>
        <div id="element3" name="element" class="col-md-8 text-center">
          <p><h3 name="title"><span name="number">1. </span>Anaemia (Hb less than 12.6mg/dl) </h3>
          <input type="checkbox" data-toggle="toggle" data-size="large" data-on="Yes" data-off="No" data-onstyle="success" data-offstyle="danger" name="factor" id="factor3"></p>
        </div>
        <div id="element4" name="element" class="col-md-8 text-center">
          <p><h3 name="title"><span name="number">1. </span>eGFR less than 60ml/min</h3>
          <input type="checkbox" data-toggle="toggle" data-size="large" data-on="Yes" data-off="No" data-onstyle="success" data-offstyle="danger" name="factor" id="factor4"></p>
        </div>
        <div id="element5" name="element" class="col-md-8 text-center">
          <p><h3 name="title"><span name="number">1. </span>History of Atrial Fibrillation</h3>
          <input type="checkbox" data-toggle="toggle" data-size="large" data-on="Yes" data-off="No" data-onstyle="success" data-offstyle="danger" name="factor" id="factor5"></p>
        </div>
        <div id="element6" name="element" class="col-md-8 text-center">
          <p><h3 name="title"><span name="number">1. </span>Chinese Ethnicity</h3>
          <input type="checkbox" data-toggle="toggle" data-size="large" data-on="Yes" data-off="No" data-onstyle="success" data-offstyle="danger" name="factor" id="factor6"></p>
        </div>
        <div id="element7" name="element" class="col-md-8 text-center">
          <p><h3 name="title"><span name="number">1. </span>Malay Ethnicity</h3>
          <input type="checkbox" data-toggle="toggle" data-size="large" data-on="Yes" data-off="No" data-onstyle="success" data-offstyle="danger" name="factor" id="factor7"></p>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 col-md-offset-3">
        <h2 class="text-center">Intra-operative Factors</h1>
      </div>
    </div>

    <div class="row">
      <div class="col-md-offset-3">
        <div id="element8" name="element" class="col-md-8 text-center">
          <p><h3 name="title"><span name="number">1. </span>Red Blood Cell Transfusion</h3>
          <input type="checkbox" data-toggle="toggle" data-size="large" data-on="Yes" data-off="No" data-onstyle="success" data-offstyle="danger" name="factor" id="factor8"></p>
        </div>
        <div id="element9" name="element" class="col-md-8 text-center">
          <p><h3 name="title"><span name="number">1. </span>Use of Intra-Aortic Balloon Pump</h3>
          <input type="checkbox" data-toggle="toggle" data-size="large" data-on="Yes" data-off="No" data-onstyle="success" data-offstyle="danger" name="factor" id="factor9"></p>
        </div>
        <div id="element10" name="element" class="col-md-8 text-center">
          <p><h3 name="title"><span name="number">1. </span>Cardiopulmonary bypass usage duration more than or equal to 120min</h3>
          <input type="checkbox" data-toggle="toggle" data-size="large" data-on="Yes" data-off="No" data-onstyle="success" data-offstyle="danger" name="factor" id="factor10"></p>
        </div>
        <div id="element11" name="element" class="col-md-8 text-center">
          <p><h3 name="title"><span name="number">1. </span>Lowest haematocrit during cardiopulmonary bypass less than 22%</h3>
          <input type="checkbox" data-toggle="toggle" data-size="large" data-on="Yes" data-off="No" data-onstyle="success" data-offstyle="danger" name="factor" id="factor11"></p>
        </div>
        <div id="element12" name="element" class="col-md-8 text-center">
          <p><h3 name="title"><span name="number">1. </span>Intraoperative inotrope use</h3>
          <input type="checkbox" data-toggle="toggle" data-size="large" data-on="Yes" data-off="No" data-onstyle="success" data-offstyle="danger" name="factor" id="factor12"></p>
        </div>

      </div>
    </div>
        

    <div class="row">
      <div class="col-md-6 col-md-offset-3">
        <h2 class="text-center" id="scoretext">Your score is 0</h2>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 col-md-offset-3 panel panel-default" id="akirisk">
        <h2 class="text-center">Categories of AKI Risk</h2>
        <h3 class="text-center">Low: 0-4 Points</h3>
        <h3 class="text-center">Medium: 5-8 Points</h3>
        <h3 class="text-center">High: 9-14 Points</h3>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 col-md-offset-3 panel panel-default" id="afrisk">
        <h2 class="text-center">Categories of AF Risk</h2>
        <h3 class="text-center">Low: 0-2 Points</h3>
        <h3 class="text-center">Medium: 3-5 Points</h3>
        <h3 class="text-center">High: 6-9 Points</h3>
      </div>
    </div>

<hr>
<h5> Acknowledgements </h5>
<p style="font-size:80%;"> Thanks to James, Yanling and Ze Xuan for the advice and help with this website's design. </p>

  </div>
</body>
</html>